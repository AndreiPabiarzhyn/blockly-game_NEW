<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blockly Game Starter</title>

  <!-- –°—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="prize.css">
  <!-- Blockly CDN -->
  <script src="https://unpkg.com/blockly/blockly.min.js"></script>
</head>
<body>
  <div class="app">
    <header class="topbar">
      <!-- –ª–µ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
      <div class="topbar__left">
        <h1 class="brand-title">Blockly Game Starter</h1>
        <img src="assets/kodland.png" alt="Kodland" class="logo" />
      </div>

      <!-- –ø—Ä–∞–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
      <div class="topbar__right">
        <!-- –≥—Ä—É–ø–ø–∞ 1: –Ω–∞–≤–∏–≥–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π -->
        <div class="level-nav">
          <button id="btnPrev" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å">‚óÄ</button>
          <span id="levelLabel">–£—Ä–æ–≤–µ–Ω—å 1/15</span>
          <button id="btnNext" title="–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å">‚ñ∂</button>
        </div>

        <!-- –≥—Ä—É–ø–ø–∞ 2: –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="primary-actions">
          <button id="btnRun">–ó–∞–ø—É—Å—Ç–∏—Ç—å ‚ñ∂</button>
          <button id="btnReset">–°–±—Ä–æ—Å ‚ü≤</button>
          <button id="btnHint">–ü–æ–¥—Å–∫–∞–∑–∫–∞ üí°</button>
        </div>
      </div>
    </header>


    <main class="layout">
      <section class="left">
        <div id="blocklyDiv"></div>
      </section>
      <section class="right">
        <div class="stage-wrap">
          <canvas id="stage" width="560" height="560" aria-label="–ò–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞" role="img"></canvas>
        </div>
        <div class="console" id="console" aria-live="polite"></div>
      </section>
    </main>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ä—Ç–∞ -->
  <div class="modal" id="modalStart" aria-hidden="false">
    <div class="modal__card">
      <h2>–ü—Ä–æ–π–¥–∏ –≤—Å–µ 10 —É—Ä–æ–≤–Ω–µ–π –∏ –∑–∞–±–µ—Ä–∏ –ø—Ä–∏–∑ üéÅ</h2>
      <p>–°–æ–±–∏—Ä–∞–π –º–æ–Ω–µ—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–π –±–ª–æ–∫–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è. –ù–∞—á–∏–Ω–∞—è —Å 5 —É—Ä–æ–≤–Ω—è ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π —Ü–∏–∫–ª—ã.</p>
      <button id="btnStart">–°—Ç–∞—Ä—Ç</button>
    </div>
  </div>

  <!-- –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
  <div class="modal" id="modalWin" aria-hidden="true">
    <div class="modal__card">
      <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ —É—Ä–æ–≤–Ω–∏ üéâ</h2>
      <audio id="end-audio" src="assets/end.mp3" preload="auto"></audio>
      <p>–í–æ—Ç —Ç–≤–æ–π –±–æ–ª—å—à–æ–π –ø—Ä–∏–∑!</p>
      <img src="assets/prize.png" alt="–ü—Ä–∏–∑" onerror="this.style.display='none'">
      <canvas id="fw" width="600" height="300"></canvas>
      <button id="btnRestart">–° –Ω–∞—á–∞–ª–∞</button>
    </div>
  </div>

  <!-- –¢—É–ª–±–æ–∫—Å –¥–ª—è Blockly -->
  <xml id="toolbox" style="display:none">
    <block type="when_run"></block>
    <block type="move_right"></block>
    <block type="move_left"></block>
    <block type="move_up"></block>
    <block type="move_down"></block>

    <block type="controls_repeat_ext">
      <value name="TIMES">
        <shadow type="repeat_count"></shadow>
      </value>
    </block>

    <block type="pick_coin"></block>
  </xml>

  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
  <div class="modal" id="modalResult" aria-hidden="true">
    <div class="modal__card">
      <img id="resultImg" src="" alt="" style="max-width:240px; display:block; margin:0 auto 1rem;">
      <h2 id="resultTitle" style="margin-bottom:0.5rem"></h2>
      <p id="resultMsg" style="margin-bottom:1rem"></p>
      <div style="display:flex; gap:.5rem; justify-content:center;">
        <button id="btnResultClose">–û–∫</button>
        <button id="btnNextLevel">–î–∞–ª—å—à–µ ‚ñ∂</button>
      </div>
    </div>
  </div>

  <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ -->
  <div class="modal" id="modalHint" aria-hidden="true">
    <div class="modal__card">
      <h2>–ü–æ–¥—Å–∫–∞–∑–∫–∞ üí°</h2>
      <p id="hintText" style="margin: .75rem 0 1rem;"></p>
      <div style="display:flex; gap:.5rem; justify-content:center;">
        <button id="btnAutoStart">–ê–≤—Ç–æ-–¥–æ–±–∞–≤–∏—Ç—å ¬´–ö–æ–≥–¥–∞ –∑–∞–ø—É—â–µ–Ω–æ¬ª</button>
        <button id="btnHintClose">–ü–æ–Ω—è—Ç–Ω–æ</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è Kodland ¬∑ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: <strong>Andrei Pabiarzhyn</strong> ¬∑ ¬© 2025
    </div>
  </footer>

<!-- –°–∫—Ä–∏–ø—Ç—ã -->
<script src="tasks.js"></script>
<script src="blocks.js"></script>
<script src="app.js"></script>

</body>
</html>
